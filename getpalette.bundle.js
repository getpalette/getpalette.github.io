var demo;(()=>{"use strict";var t={d:(r,e)=>{for(var s in e)t.o(e,s)&&!t.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:e[s]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{getPalette:()=>h,whiteColor:()=>o});const e={hsl2rgb(t,r,e){const s=t>=0&&t<=360,n=r>=0&&r<=1,i=e>=0&&e<=1;if(!s||!n||!i)throw new Error(`hsl2rgb: h:${t} s:${r} l:${e} ch:${s} cs:${n} cl:${i}`);const a={r:0,g:0,b:0},h=(1-(2*e-1))*r,o=t/60,u=1*h-(o%2-1);o>=0&&o<1&&(a.r=h,a.g=u,a.b=0),o>=1&&o<2&&(a.r=u,a.g=h,a.b=0),o>=2&&o<3&&(a.r=0,a.g=h,a.b=u),o>=3&&o<4&&(a.r=0,a.g=u,a.b=h),o>=4&&o<5&&(a.r=u,a.g=0,a.b=h),o>=5&&o<6&&(a.r=h,a.g=0,a.b=u);const g=e-h/2;return a.r=Math.floor(100*(a.r+g)),a.g=Math.floor(100*(a.g+g)),a.b=Math.floor(100*(a.b+g)),a},hsv2rgb(t,r,e){let s=t/360;const n=r/100;let i,a,h=e/100,o=0,u=0,g=0,l=0;if(0===n)o=u=g=Math.round(255*h);else switch(s>=1&&(s=0),s*=6,a=s-Math.floor(s),l=Math.round(255*h*(1-n)),g=Math.round(255*h*(1-n*a)),i=Math.round(255*h*(1-n*(1-a))),h=Math.round(255*h),Math.floor(s)){case 0:o=h,u=i,g=l;break;case 1:o=g,u=h,g=l;break;case 2:o=l,u=h,g=i;break;case 3:o=l,u=g,g=h;break;case 4:o=i,u=l,g=h;break;case 5:o=h,u=l}return{r:o||0,g:u||0,b:g||0}},rgb2hsv(t,r,e){let s=0,n=0,i=0;if(null==t||null==r||null==e||isNaN(t)||isNaN(r)||isNaN(e))throw new Error("Please enter numeric RGB values!");if(t<0||r<0||e<0||t>255||r>255||e>255)throw new Error("RGB values must be in the range 0 to 255.");t/=255,r/=255,e/=255;const a=Math.min(t,Math.min(r,e)),h=Math.max(t,Math.max(r,e));return a===h?(i=a,{h:0,s:0,v:i}):(s=60*((t===a?3:e===a?1:5)-(t===a?r-e:e===a?t-r:e-t)/(h-a)),n=(h-a)/h,i=h,{h:s,s:n,v:i})},hsl2hsv(t,r,e){const s={h:t,s:0,v:0};return s.v=e+r*Math.min(e,1-e),s.s=0===s.v?0:2*(1-e/s.v),s},hex2rgb(t){if("#"!==t.charAt(0))throw new Error("hex must start with # character");if(4===t.length)return{r:parseInt(t.substring(1,2)+t.substring(1,2),16),g:parseInt(t.substring(2,3)+t.substring(2,3),16),b:parseInt(t.substring(3,4)+t.substring(3,4),16)};if(7===t.length)return{r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16)};throw new Error("hex length is invalid")}};class s{_r=0;_g=0;_b=0;_a=1;constructor(...t){if(t&&t.length){if("string"==typeof t[0]){const{r,g:s,b:n}=e.hex2rgb(t[0]);return this.r=r,this.g=s,void(this.b=n)}if("number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2])return this.r=t[0],this.g=t[1],this.b=t[2],void(this.a="number"==typeof t[3]?t[3]:1);if(t[0]instanceof n){const{r,g:s,b:n}=e.hsv2rgb(t[0].h,t[0].s,t[0].v);return this.r=r,this.g=s,void(this.b=n)}if(t[0]instanceof class{h;s;l;a;constructor(t,r,e,s){this.h=t,this.s=r,this.l=e,this.a=void 0===s?1:s}}){const{r,g:s,b:n}=e.hsl2rgb(t[0].h,t[0].s,t[0].l);return this.r=r,this.g=s,void(this.b=n)}throw new Error("Has been not found suitable signature")}}get r(){return this._r}set r(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>255)throw new Error("value is unsupported");this._r=t}get g(){return this._g}set g(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>255)throw new Error("value is unsupported");this._g=t}get b(){return this._b}set b(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>255)throw new Error("value is unsupported");this._b=t}get a(){return this._a}set a(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>1)throw new Error("value is unsupported");this._a=t}get value(){let t=this.r;return t=(t<<8)+this.g,t=(t<<8)+this.b,t}get invert(){return new s(255-this.r,255-this.g,255-this.b,this.a)}getContrastRatio(t,r){const e=this.getContrast(this),s=this.getContrast(t);return r?(s+.05)/(e+.05):(e+.05)/(s+.05)}toString(){let t=this.r.toString(16);t=1===t.length?"0"+t:t;let r=this.g.toString(16);r=1===r.length?"0"+r:r;let e=this.b.toString(16);return e=1===e.length?"0"+e:e,1===this.a?`#${t}${r}${e}`:`rgba(${t},${r},${e},${this.a})`}toHSV(){const{h:t,s:r,v:s}=e.rgb2hsv(this.r,this.g,this.b);return new n(Math.floor(Math.round(t)),Math.floor(100*r),Math.floor(100*s))}getContrast(t){const{r,g:e,b:s}=t,n=t=>t<11?t/255/12.92:Math.pow((t/255+.055)/1.055,2.4);return.2126*n(r)+.7152*n(e)+.0722*n(s)}static black=new s("#000000");static white=new s("#ffffff");static red=new s("#ff0000");static green=new s("#00ff00");static blue=new s("#0000ff")}class n{h;s;v;a;constructor(t,r,e,s){this.h=t,this.s=r,this.v=e,this.a=void 0===s?1:s}toString(){return`hsv(${this.h}, ${this.s}%, ${this.v}%)`}}class i{x;y;constructor(...t){this.x=0,this.y=0,1===t.length&&(this.x=t[0].x,this.y=t[0].y),2===t.length&&(this.x=t[0],this.y=t[1])}add(t){return new i(this.x+t.x,this.y+t.y)}dec(t){return new i(this.x-t.x,this.y-t.y)}static sum(t,r){return new i(t.x+r.x,t.y+r.y)}static mul(t,r){return new i(t.x*r.x,t.y*r.y)}}const a={};function h(t,r,e){const n=r.getContext("2d");if(!n)return;r.width=t.naturalWidth,r.height=t.naturalHeight,console.log("drawImage"),n.drawImage(t,0,0,r.width,r.height,0,0,t.naturalWidth,t.naturalHeight),console.log("drawImage got"),console.log("getImageData");const i=n.getImageData(0,0,t.naturalWidth,t.naturalHeight),a=n.createImageData(t.naturalWidth,t.naturalHeight);console.log("getImageData got");const h=[],o=[],g=i.data.length;for(let t=0;t<g;t+=4){const r=i.data[t],n=i.data[t+1],g=i.data[t+2],l=i.data[t+3],c=Math.floor(r/e),d=Math.floor(n/e),p=Math.floor(g/e),w=o.findIndex((t=>t.equals(c,d,p,l))),f=h[w]?h[w]:new s(r,n,g,1);a.data[t]=f.r,a.data[t+1]=f.g,a.data[t+2]=f.b,a.data[t+3]=l,w>-1||(o.push(new u(c,d,p,0)),h.push(new s(r,n,g,1)))}const l=document.createElement("canvas");l.width=r.width,l.height=r.height,l.getContext("2d")?.putImageData(a,0,0);const c=l.toDataURL();return{list:h.sort(((t,r)=>t.toHSV().v-r.toHSV().v)),image:c}}function o(){return new s("#ffffff")}a.Arc=(t,r,e)=>{if("Arc"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s),t.push(new i(s.x,s.y+r.radius)),t.push(new i(s.x,s.y+-r.radius)),t.push(new i(s.y,s.y+r.radius)),t.push(new i(s.x,s.y+-r.radius))},a.ArcTo=(t,r,e)=>{if("ArcTo"!==r.type)return;const s=e.applyMatrix(new i(r.x1,r.y1)),n=e.applyMatrix(new i(r.x2,r.y2));t.push(s),t.push(n),t.push(new i(s.x,s.y+r.radius)),t.push(new i(s.x,s.y+-r.radius)),t.push(new i(s.y,s.y+r.radius)),t.push(new i(s.x,s.y+-r.radius))},a.BezierCurveTo=(t,r,e)=>{if("BezierCurveTo"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s)},a.ClosePath=()=>{},a.Ellipse=(t,r,e)=>{if("Ellipse"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s),t.push(new i(s.x,r.radiusX)),t.push(new i(s.x,-r.radiusX)),t.push(new i(s.y,r.radiusY)),t.push(new i(s.x,-r.radiusY))},a.LineTo=(t,r,e)=>{if("LineTo"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s)},a.MoveTo=(t,r,e)=>{if("MoveTo"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s)},a.QuadraticCurveTo=(t,r,e)=>{if("QuadraticCurveTo"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s),t.push(new i(s.x,r.cpx)),t.push(new i(s.y,r.cpy))},a.Rect=(t,r,e)=>{if("Rect"!==r.type)return;const s=e.applyMatrix(new i(r));t.push(s),t.push(new i(s.x+r.w,s.y+r.h))};class u{r;g;b;a;constructor(t,r,e,s){this.r=t,this.g=r,this.b=e,this.a=s}equals(t,r,e,s){return this.r===t&&this.g===r&&this.b===e}}demo=r})();
